<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Transform Movebank data to Darwin Core — write_dwc • movepub</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform Movebank data to Darwin Core — write_dwc"><meta name="description" content="Transforms data from a Movebank dataset (formatted as a Frictionless Data Package) to Darwin Core.
The resulting CSV and EML files can be uploaded to an IPT for publication to GBIF and/or OBIS.
A meta.xml file is not created."><meta property="og:description" content="Transforms data from a Movebank dataset (formatted as a Frictionless Data Package) to Darwin Core.
The resulting CSV and EML files can be uploaded to an IPT for publication to GBIF and/or OBIS.
A meta.xml file is not created."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">movepub</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/movepub.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inbo/movepub/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transform Movebank data to Darwin Core</h1>
      <small class="dont-index">Source: <a href="https://github.com/inbo/movepub/blob/v0.3.0/R/write_dwc.R" class="external-link"><code>R/write_dwc.R</code></a></small>
      <div class="d-none name"><code>write_dwc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Transforms data from a Movebank dataset (formatted as a <a href="https://specs.frictionlessdata.io/data-package/" class="external-link">Frictionless Data Package</a>) to <a href="https://dwc.tdwg.org/" class="external-link">Darwin Core</a>.
The resulting CSV and EML files can be uploaded to an <a href="https://www.gbif.org/ipt" class="external-link">IPT</a> for publication to GBIF and/or OBIS.
A <code>meta.xml</code> file is not created.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">write_dwc</span><span class="op">(</span></span>
<span>  <span class="va">package</span>,</span>
<span>  directory <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  doi <span class="op">=</span> <span class="va">package</span><span class="op">$</span><span class="va">id</span>,</span>
<span>  contact <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rights_holder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  study_id <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-package">package<a class="anchor" aria-label="anchor" href="#arg-package"></a></dt>
<dd><p>A Frictionless Data Package of Movebank data, as read by
<code><a href="https://docs.ropensci.org/frictionless/reference/read_package.html" class="external-link">frictionless::read_package()</a></code>.</p></dd>


<dt id="arg-directory">directory<a class="anchor" aria-label="anchor" href="#arg-directory"></a></dt>
<dd><p>Path to local directory to write file(s) to.</p></dd>


<dt id="arg-doi">doi<a class="anchor" aria-label="anchor" href="#arg-doi"></a></dt>
<dd><p>DOI of the original dataset, used to get metadata.</p></dd>


<dt id="arg-contact">contact<a class="anchor" aria-label="anchor" href="#arg-contact"></a></dt>
<dd><p>Person to be set as resource contact and metadata provider.
To be provided as a <code><a href="https://rdrr.io/r/utils/person.html" class="external-link">person()</a></code>.</p></dd>


<dt id="arg-rights-holder">rights_holder<a class="anchor" aria-label="anchor" href="#arg-rights-holder"></a></dt>
<dd><p>Acronym of the organization owning or managing the
rights over the data.</p></dd>


<dt id="arg-study-id">study_id<a class="anchor" aria-label="anchor" href="#arg-study-id"></a></dt>
<dd><p>Identifier of the Movebank study from which the dataset was
derived (e.g. <code>1605797471</code> for
<a href="https://www.movebank.org/cms/webapp?gwt_fragment=page=studies,path=study160579747" class="external-link">this study</a>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>CSV (data) and EML (metadata) files written to disk.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <a href="https://inbo.github.io/movepub/articles/movepub.html#dwc">Get started</a>
for examples.</p>
    </div>
    <div class="section level2">
    <h2 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a></h2>


<p>Metadata are derived from the original dataset by looking up its <code>doi</code> in
DataCite (<a href="https://api.datacite.org/dois/10.5281/zenodo.5879096" class="external-link">example</a>)
and transforming these to EML.
Uses <code><a href="datacite_to_eml.html">datacite_to_eml()</a></code> under the hood.
The following properties are set:</p><ul><li><p><strong>title</strong>: Original title + <code>[subsampled representation]</code>.</p></li>
<li><p><strong>description</strong>: Automatically created first paragraph describing this is
a derived dataset, followed by the original dataset description.</p></li>
<li><p><strong>license</strong>: License of the original dataset.</p></li>
<li><p><strong>creators</strong>: Creators of the original dataset.</p></li>
<li><p><strong>contact</strong>: <code>contact</code> or first creator of the original dataset.</p></li>
<li><p><strong>metadata provider</strong>: <code>contact</code> or first creator of the original dataset.</p></li>
<li><p><strong>keywords</strong>: Keywords of the original dataset.</p></li>
<li><p><strong>alternative identifier</strong>: DOI of the original dataset. This way, no new
DOI will be created when publishing to GBIF.</p></li>
<li><p><strong>external link</strong> and <strong>alternative identifier</strong>: URL created from
<code>study_id</code> or the first "derived from" related identifier in the original
dataset.</p></li>
</ul><p>To be set manually in the GBIF IPT: <strong>type</strong>, <strong>subtype</strong>,
<strong>update frequency</strong>, and <strong>publishing organization</strong>.</p>
<p>Not set: geographic, taxonomic, temporal coverage, associated parties,
project data, sampling methods, and citations.
Not applicable: collection data.</p>
    </div>
    <div class="section level2">
    <h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a></h2>


<p><code>package</code> is expected to contain a <code>reference-data</code> and <code>gps</code> resource.
Data are transformed into an <a href="https://rs.gbif.org/core/dwc_occurrence_2022-02-02.xml" class="external-link">Occurrence Core</a>.
This <strong>follows recommendations</strong> discussed and created by Peter Desmet,
Sarah Davidson, John Wieczorek and others.</p>
<p>Key features of the Darwin Core transformation:</p><ul><li><p>Deployments (animal+tag associations) are parent events, with tag
attachment (a human observation) and GPS positions (machine observations)
as child events.
No information about the parent event is provided other than its ID,
meaning that data can be expressed in an Occurrence Core with one row per
observation and <code>parentEventID</code> shared by all occurrences in a deployment.</p></li>
<li><p>The tag attachment event often contains metadata about the animal (sex,
lifestage, comments) and deployment as a whole.</p></li>
<li><p>No event/occurrence is created for the deployment end, since the end date
is often undefined, unreliable and/or does not represent an animal
occurrence.</p></li>
<li><p>Only <code>visible</code> (nonoutlier) GPS records that fall within a deployment are
included.</p></li>
<li><p>GPS positions are downsampled to the <strong>first GPS position per hour</strong>, to
reduce the size of high-frequency data.
It is possible for a deployment to contain no GPS positions, e.g. if the
tag malfunctioned right after deployment.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">write_dwc</span><span class="op">(</span><span class="va">o_assen</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://twitter.com/peterdesmet" class="external-link">Peter Desmet</a>, <a href="https://www.nlbif.nl/move2gbif-gps-zendergegevens-van-dieren-mobiliseren-naar-movebank-en-gbif/" class="external-link"><img src="https://www.nlbif.nl/wp-content/uploads/logo-nlbif.png" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

