<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Transform Movebank data to a Darwin Core Archive — write_dwc • movepub</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform Movebank data to a Darwin Core Archive — write_dwc"><meta name="description" content="Transforms a Movebank dataset (formatted as a Frictionless Data Package) to a Darwin Core Archive."><meta property="og:description" content="Transforms a Movebank dataset (formatted as a Frictionless Data Package) to a Darwin Core Archive."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">movepub</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/movepub.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inbo/movepub/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transform Movebank data to a Darwin Core Archive</h1>
      <small class="dont-index">Source: <a href="https://github.com/inbo/movepub/blob/main/R/write_dwc.R" class="external-link"><code>R/write_dwc.R</code></a></small>
      <div class="d-none name"><code>write_dwc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Transforms a Movebank dataset (formatted as a <a href="https://specs.frictionlessdata.io/data-package/" class="external-link">Frictionless Data Package</a>) to a <a href="https://dwc.tdwg.org/text/" class="external-link">Darwin Core Archive</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">write_dwc</span><span class="op">(</span></span>
<span>  <span class="va">package</span>,</span>
<span>  <span class="va">directory</span>,</span>
<span>  dataset_id <span class="op">=</span> <span class="va">package</span><span class="op">$</span><span class="va">id</span>,</span>
<span>  dataset_name <span class="op">=</span> <span class="va">package</span><span class="op">$</span><span class="va">title</span>,</span>
<span>  license <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rights_holder <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-package">package<a class="anchor" aria-label="anchor" href="#arg-package"></a></dt>
<dd><p>A Frictionless Data Package of Movebank data, as returned by
<code><a href="https://docs.ropensci.org/frictionless/reference/read_package.html" class="external-link">read_package()</a></code>.
It is expected to contain a <code>reference-data</code> and <code>gps</code> resource.</p></dd>


<dt id="arg-directory">directory<a class="anchor" aria-label="anchor" href="#arg-directory"></a></dt>
<dd><p>Path to local directory to write files to.</p></dd>


<dt id="arg-dataset-id">dataset_id<a class="anchor" aria-label="anchor" href="#arg-dataset-id"></a></dt>
<dd><p>Identifier for the dataset.</p></dd>


<dt id="arg-dataset-name">dataset_name<a class="anchor" aria-label="anchor" href="#arg-dataset-name"></a></dt>
<dd><p>Title of the dataset.</p></dd>


<dt id="arg-license">license<a class="anchor" aria-label="anchor" href="#arg-license"></a></dt>
<dd><p>License of the dataset.</p></dd>


<dt id="arg-rights-holder">rights_holder<a class="anchor" aria-label="anchor" href="#arg-rights-holder"></a></dt>
<dd><p>Acronym of the organization owning or managing the
rights over the data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>CSV and <code>meta.xml</code> files written to disk.
And invisibly, a list of data frames with the transformed data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The resulting files can be uploaded to an <a href="https://www.gbif.org/ipt" class="external-link">IPT</a>
for publication to GBIF and/or OBIS.
A corresponding <code>eml.xml</code> metadata file can be created with <code><a href="write_eml.html">write_eml()</a></code>.
See <code><a href="../articles/movepub.html">vignette("movepub")</a></code> for an example.</p>
    </div>
    <div class="section level2">
    <h2 id="transformation-details">Transformation details<a class="anchor" aria-label="anchor" href="#transformation-details"></a></h2>


<p>This function <strong>follows recommendations</strong> suggested by Peter Desmet,
Sarah Davidson, John Wieczorek and others and transforms data to:</p><ul><li><p>An <a href="https://rs.gbif.org/core/dwc_occurrence_2022-02-02.xml" class="external-link">Occurrence core</a>.</p></li>
<li><p>An <a href="https://rs.gbif.org/extension/obis/extended_measurement_or_fact_2023-08-28.xml" class="external-link">Extended Measurements Or Facts extension</a></p></li>
<li><p>A <code>meta.xml</code> file.</p></li>
</ul><p>Key features of the Darwin Core transformation:</p><ul><li><p>Deployments (animal+tag associations) are parent events, with tag
attachment (a human observation) and GPS positions (machine observations)
as child events.
No information about the parent event is provided other than its ID,
meaning that data can be expressed in an Occurrence core with one row per
observation and <code>parentEventID</code> shared by all occurrences in a deployment.</p></li>
<li><p>The tag attachment event often contains metadata about the animal (sex,
life stage, comments) and deployment as a whole.
The sex and life stage are additionally provided in an Extended Measurement
Or Facts extension, where values are mapped to a controlled vocabulary
recommended by <a href="https://obis.org/" class="external-link">OBIS</a>.</p></li>
<li><p>No event/occurrence is created for the deployment end, since the end date
is often undefined, unreliable and/or does not represent an animal
occurrence.</p></li>
<li><p>Only <code>visible</code> (non-outlier) GPS records that fall within a deployment are
included.</p></li>
<li><p>GPS positions are downsampled to the <strong>first GPS position per hour</strong>, to
reduce the size of high-frequency data.
It is possible for a deployment to contain no GPS positions, e.g. if the
tag malfunctioned right after deployment.</p></li>
<li><p>Parameters or metadata are used to set the following record-level terms:</p><ul><li><p><code>dwc:datasetID</code>: <code>dataset_id</code>, defaulting to <code>package$id</code>.</p></li>
<li><p><code>dwc:datasetName</code>: <code>dataset_name</code>, defaulting to <code>package$title</code>.</p></li>
<li><p><code>dcterms:license</code>: <code>license</code>, defaulting to the first license <code>name</code>
(e.g. <code>CC0-1.0</code>) in <code>package$licenses</code>.</p></li>
<li><p><code>dcterms:rightsHolder</code>: <code>rights_holder</code>, defaulting to the first
contributor in <code>package$contributors</code> with role <code>rightsHolder</code>.</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other dwc functions:
<code><a href="write_eml.html">write_eml</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">write_dwc</span><span class="op">(</span><span class="va">o_assen</span>, directory <span class="op">=</span> <span class="st">"my_directory"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Reading data</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Taxa found in reference data and their WoRMS AphiaID:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Haematopus ostralegus: 147436</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> (<span style="color: #0000BB; font-style: italic;">&lt;https://www.marinespecies.org/aphia.php?p=taxdetails&amp;id=147436&gt;</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Transforming data to Darwin Core</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Writing files</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • <span style="color: #0000BB;">my_directory/occurrence.csv</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • <span style="color: #0000BB;">my_directory/meta.xml</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • <span style="color: #0000BB;">my_directory/emof.csv</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean up (don't do this if you want to keep your files)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="st">"my_directory"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Peter Desmet, NLBIF, European Union.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

